[gd_scene load_steps=5 format=2]

[ext_resource path="res://components/widgets/Chart.gd" type="Script" id=1]
[ext_resource path="res://assets/theme/dark_theme.tres" type="Theme" id=2]

[sub_resource type="Shader" id=5]
code = "shader_type canvas_item;

uniform vec2 grid_divisions = vec2(5.0);
uniform vec4 grid_color :  hint_color = vec4(0.14,0.14,0.2, 1.0);
uniform vec2 size = vec2(1832.0, 1000.0);

void fragment(){
	vec2 px_size = 2.0/size;
	vec2 coord = fract(UV * grid_divisions);
//	if (coord.x >= 1.0 -  2.0* px_size.x || coord.x <= 2.0*px_size.x || coord.y >= 1.0 - 2.0*px_size.y || coord.y <= 2.0*px_size.y){
//		COLOR = grid_color;
//	}
	COLOR =grid_color*clamp( smoothstep(1.0 - 3.0*px_size.x, 1.0, coord.x) + (1.0-smoothstep(0.0, 3.0*px_size.x, coord.x)) + 
	smoothstep(1.0 - 3.0*px_size.y, 1.0, coord.y) + (1.0-smoothstep(0.0, 3.0*px_size.y, coord.y)), 0.0, 1.0);
}"

[sub_resource type="ShaderMaterial" id=6]
shader = SubResource( 5 )
shader_param/grid_divisions = Vector2( 5, 5 )
shader_param/grid_color = Color( 0.85098, 0.721569, 1, 0.168627 )
shader_param/size = Vector2( 1832, 1000 )

[node name="Chart" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 1 )
data_type = 1
x_origin = 0.0
x_range = 100.0
max_y_value = 100
min_y_value = 0
divisions = Vector2( 4, 8 )

[node name="ColorRect" type="ColorRect" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0.0941176, 0.0941176, 0.0941176, 1 )

[node name="Grid" type="ColorRect" parent="."]
material = SubResource( 6 )
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 64.0
margin_top = 24.0
margin_right = -24.0
margin_bottom = -56.0
color = Color( 0.0941176, 0.0941176, 0.0941176, 1 )

[node name="XLabels" type="HBoxContainer" parent="."]
anchor_top = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 64.0
margin_top = -56.0
margin_right = -24.0
margin_bottom = -7.0
custom_constants/separation = 0

[node name="YLabels" type="VBoxContainer" parent="."]
anchor_bottom = 1.0
margin_left = 24.0
margin_top = 24.0
margin_right = 48.0
margin_bottom = -56.0
custom_constants/separation = 0

[node name="GraphArea" type="Control" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = 64.0
margin_top = 24.0
margin_right = -24.0
margin_bottom = -56.0

[node name="CanvasLayer" type="CanvasLayer" parent="."]

[node name="PopupLegend" type="PanelContainer" parent="CanvasLayer"]
visible = false
self_modulate = Color( 1, 1, 1, 0.717647 )
margin_right = 14.0
margin_bottom = 14.0
mouse_filter = 2
theme = ExtResource( 2 )

[node name="VBoxContainer" type="VBoxContainer" parent="CanvasLayer/PopupLegend"]
margin_left = 5.0
margin_top = 5.0
margin_right = 9.0
margin_bottom = 9.0
mouse_filter = 2

[connection signal="mouse_entered" from="GraphArea" to="." method="_on_GraphArea_mouse_entered"]
[connection signal="mouse_exited" from="GraphArea" to="." method="_on_GraphArea_mouse_exited"]
[connection signal="resized" from="GraphArea" to="." method="_on_GraphArea_resized"]
